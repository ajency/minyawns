// Generated by CoffeeScript 1.8.0
(function() {
  define(["marionette"], function(Marionette) {
    var isMobile;
    isMobile = function() {
      var userAgent;
      userAgent = navigator.userAgent || navigator.vendor || window.opera;
      return /iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(userAgent);
    };
    window.App = new Marionette.Application;
    console.log("appstrt" + ajan_activity_stream_container);
    App.addRegions({
      activitystreamRegion: ajan_activity_stream_container
    });
    App.reqres.setHandler("default:region", function() {
      return App.activitystreamRegion;
    });
    App.commands.setHandler("when:fetched", function(entities, callback) {
      var xhrs;
      xhrs = _.chain([entities]).flatten().pluck("_fetch").value();
      return $.when.apply($, xhrs).done(function() {
        return callback();
      });
    });
    App.on("initialize:after", function(options) {
      console.log("intiapp");
      Backbone.history.start();
      return App.execute("show:activity:package", {
        region: App.activitystreamRegion
      });
    });
    return App;
  });

}).call(this);
